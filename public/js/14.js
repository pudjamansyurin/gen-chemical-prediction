(window.webpackJsonp=window.webpackJsonp||[]).push([[14,20,21],{"MQ/m":function(e,t,r){"use strict";r.r(t);var n=r("mJJU"),a=r("k0WU"),i=r("eyW1"),s={mixins:[n.c],components:{FieldMaterial:a.default,FieldMeasurement:i.default},props:{matters:{type:Array,default:function(){return[]}},materials:{type:Array,default:function(){return[]}},measurements:{type:Array,default:function(){return[]}}}},o=r("KHd+"),l=Object(o.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("the-dialog-form",{attrs:{title:e.formTitle,disabled:e.disabled,readonly:e.readonly},on:{submit:e.save},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-form",{attrs:{disabled:e.disabled,readonly:e.readonly},on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("v-text-field",{attrs:{"error-messages":e.form.error("name"),success:!!e.form.error("name"),autofocus:!e.mobile,dense:e.denser,label:"Formula name",type:"text",hint:"This should be unique name","persistent-hint":"",outlined:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("v-textarea",{attrs:{"error-messages":e.form.error("note"),success:!!e.form.error("note"),dense:e.denser,label:"Formula note",type:"text",hint:"Just for documentation","row-height":"2","persistent-hint":"",outlined:"","auto-grow":""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}}),e._v(" "),r("field-material",{staticClass:"mb-5",attrs:{form:e.form,disabled:e.disabled,readonly:e.readonly,matters:e.matters,materials:e.materials},on:{"update:form":function(t){e.form=t}}}),e._v(" "),r("field-measurement",{staticClass:"mb-5",attrs:{form:e.form,disabled:e.disabled,readonly:e.readonly,measurements:e.measurements},on:{"update:form":function(t){e.form=t}}}),e._v(" "),e.readonly?e._e():r("v-btn",{staticClass:"d-none",attrs:{disabled:e.disabled,type:"submit"}})],1)],1)}),[],!1,null,null,null);t.default=l.exports},eyW1:function(e,t,r){"use strict";r.r(t);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={mixins:[r("mJJU").b],props:{measurements:{type:Array,default:function(){return[]}}},data:function(){return{field:"measurements",headers:[{text:"No",value:"no",align:"center",width:8},{text:"Measurement",value:"name",align:"left"},{text:"Type",value:"type",align:"left",width:200},{text:"Value",value:"value",align:"right",width:150}]}},methods:{add:function(){this._form[this.field].push({id:-1,value:null,name:"",primary:null})},change:function(e,t){this._form[this.field].splice(e,1,a(a({},this._form[this.field][e]),{},{id:t.id,name:t.name,primary:t.primary}))},getType:function(e){return e.primary?"Primary":0===e.primary?"Secondary":void 0}},watch:{"_form.measurements.length":{immediate:!0,handler:function(e){0==e&&this.add()}}}},o=r("KHd+"),l=Object(o.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("the-simple-data",{attrs:{headers:e.headers,form:e._form,field:"measurements","disable-add":e.disableAdd,disabled:e.disabled,readonly:e.readonly},on:{add:e.add,remove:e.remove},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item,a=t.index;return[r("v-autocomplete",{attrs:{value:n.id,items:e.list(n),"error-messages":e._form.error("measurements."+a+".id"),success:!!e._form.error("measurements."+a+".id"),"item-text":"name","item-value":"id","hide-details":"auto",flat:"",outlined:"",dense:"","return-object":""},on:{change:function(t){return e.change(a,t)}},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[r("v-list-item-content",[r("v-list-item-title",[e._v("\n            "+e._s(n.name)+"\n          ")]),e._v(" "),r("v-list-item-subtitle",[e._v("\n            "+e._s(e.getType(n))+"\n          ")])],1)]}}],null,!0)})]}},{key:"item.type",fn:function(t){var r=t.item;return[e._v("\n    "+e._s(e.getType(r)||"-")+"\n  ")]}},{key:"item.value",fn:function(t){var n=t.item,a=t.index;return[r("v-text-field",{attrs:{"error-messages":e._form.error("measurements."+a+".value"),success:!!e._form.error("measurements."+a+".value"),type:"number","hide-details":"auto",reverse:"",flat:"",outlined:"",dense:""},model:{value:n.value,callback:function(t){e.$set(n,"value",e._n(t))},expression:"item.value"}})]}}],null,!0)})}),[],!1,null,null,null);t.default=l.exports},k0WU:function(e,t,r){"use strict";r.r(t);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={mixins:[r("mJJU").b],props:{materials:{type:Array,default:function(){return[]}},matters:{type:Array,default:function(){return[]}}},data:function(){return{field:"materials",headers:[{text:"No",value:"no",align:"center",width:8},{text:"Material",value:"name",align:"left"},{text:"Type",value:"type",align:"left",width:200},{text:"Portion",value:"value",align:"right",width:150}]}},computed:{portionTotal:function(){return this._form[this.field].reduce((function(e,t){var r=t.value;return e+Number(r)}),0)}},methods:{add:function(){this._form[this.field].push({id:-1,value:null,name:"",matter_id:-1})},change:function(e,t){this._form[this.field].splice(e,1,a(a({},this._form[this.field][e]),{},{id:t.id,name:t.name,matter_id:t.matter_id}))},getMatterName:function(e){var t=this.matters.find((function(t){return t.id===e.matter_id}));if(t)return t.name}},watch:{"_form.materials.length":{immediate:!0,handler:function(e){0==e&&this.add()}}}},o=r("KHd+"),l=Object(o.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("the-simple-data",{attrs:{headers:e.headers,form:e._form,field:"materials","disable-add":e.disableAdd,disabled:e.disabled,readonly:e.readonly},on:{add:e.add,remove:e.remove},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item,a=t.index;return[r("v-autocomplete",{attrs:{value:n.id,items:e.list(n),"error-messages":e._form.error("materials."+a+".id"),success:!!e._form.error("materials."+a+".id"),"item-text":"name","item-value":"id","hide-details":"auto",flat:"",outlined:"",dense:"","return-object":""},on:{change:function(t){return e.change(a,t)}},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[r("v-list-item-content",[r("v-list-item-title",[e._v("\n            "+e._s(n.name)+"\n          ")]),e._v(" "),r("v-list-item-subtitle",[e._v("\n            "+e._s(e.getMatterName(n))+"\n          ")])],1)]}}],null,!0)})]}},{key:"item.type",fn:function(t){var r=t.item;return[e._v("\n    "+e._s(e.getMatterName(r)||"-")+"\n  ")]}},{key:"item.value",fn:function(t){var n=t.item,a=t.index;return[r("v-text-field",{attrs:{"error-messages":e._form.error("materials."+a+".value"),success:!!e._form.error("materials."+a+".value"),type:"number",prefix:"%","hide-details":"auto",reverse:"",flat:"",outlined:"",dense:""},model:{value:n.value,callback:function(t){e.$set(n,"value",e._n(t))},expression:"item.value"}})]}},{key:"footer-table",fn:function(){return[r("tr",{staticClass:"font-weight-bold"},[r("td",{staticClass:"text-right",attrs:{colspan:e.headers.length-1}},[e._v("TOTAL")]),e._v(" "),r("td",{staticClass:"text-right"},[r("v-text-field",{attrs:{value:e.portionTotal,"error-messages":e._form.error("materials.value"),success:!!e._form.error("materials.value"),type:"text",prefix:"%","hide-details":"auto",readonly:"",reverse:"",flat:"",solo:"",dense:""}})],1)])]},proxy:!0},{key:"footer-iterator",fn:function(){return[r("v-list-item",{staticClass:"font-weight-bold"},[r("v-list-item-content",[e._v("Total")]),e._v(" "),r("v-list-item-content",{staticClass:"align-end justify-end"},[r("v-text-field",{attrs:{value:e.portionTotal,"error-messages":e._form.error("materials.value"),success:!!e._form.error("materials.value"),type:"text",prefix:"%","hide-details":"auto",readonly:"",reverse:"",flat:"",solo:"",dense:""}})],1)],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null);t.default=l.exports}}]);