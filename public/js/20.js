(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{k0WU:function(e,t,r){"use strict";r.r(t);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={mixins:[r("mJJU").b],props:{materials:{type:Array,default:function(){return[]}},matters:{type:Array,default:function(){return[]}}},data:function(){return{field:"materials",headers:[{text:"No",value:"no",align:"center",width:8},{text:"Material",value:"name",align:"left"},{text:"Type",value:"type",align:"left",width:200},{text:"Portion",value:"value",align:"right",width:150}]}},computed:{portionTotal:function(){return this._form[this.field].reduce((function(e,t){var r=t.value;return e+Number(r)}),0)}},methods:{add:function(){this._form[this.field].push({id:-1,value:null,name:"",matter_id:-1})},change:function(e,t){this._form[this.field].splice(e,1,i(i({},this._form[this.field][e]),{},{id:t.id,name:t.name,matter_id:t.matter_id}))},getMatterName:function(e){var t=this.matters.find((function(t){return t.id===e.matter_id}));if(t)return t.name}},watch:{"_form.materials.length":{immediate:!0,handler:function(e){0==e&&this.add()}}}},s=r("KHd+"),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("the-simple-data",{attrs:{headers:e.headers,form:e._form,field:"materials","disable-add":e.disableAdd,disabled:e.disabled,readonly:e.readonly},on:{add:e.add,remove:e.remove},scopedSlots:e._u([{key:"item.name",fn:function(t){var a=t.item,i=t.index;return[r("v-autocomplete",{attrs:{value:a.id,items:e.list(a),"error-messages":e._form.error("materials."+i+".id"),success:!!e._form.error("materials."+i+".id"),"item-text":"name","item-value":"id","hide-details":"auto",flat:"",outlined:"",dense:"","return-object":""},on:{change:function(t){return e.change(i,t)}},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[r("v-list-item-content",[r("v-list-item-title",[e._v("\n                        "+e._s(a.name)+"\n                    ")]),e._v(" "),r("v-list-item-subtitle",[e._v("\n                        "+e._s(e.getMatterName(a))+"\n                    ")])],1)]}}],null,!0)})]}},{key:"item.type",fn:function(t){var r=t.item;return[e._v("\n        "+e._s(e.getMatterName(r)||"-")+"\n    ")]}},{key:"item.value",fn:function(t){var a=t.item,i=t.index;return[r("v-text-field",{attrs:{"error-messages":e._form.error("materials."+i+".value"),success:!!e._form.error("materials."+i+".value"),type:"number",prefix:"%","hide-details":"auto",reverse:"",flat:"",outlined:"",dense:""},model:{value:a.value,callback:function(t){e.$set(a,"value",e._n(t))},expression:"item.value"}})]}},{key:"footer-table",fn:function(){return[r("tr",{staticClass:"font-weight-bold"},[r("td",{staticClass:"text-right",attrs:{colspan:e.headers.length-1}},[e._v("TOTAL")]),e._v(" "),r("td",{staticClass:"text-right"},[r("v-text-field",{attrs:{value:e.portionTotal,"error-messages":e._form.error("materials.value"),success:!!e._form.error("materials.value"),type:"text",prefix:"%","hide-details":"auto",readonly:"",reverse:"",flat:"",solo:"",dense:""}})],1)])]},proxy:!0},{key:"footer-iterator",fn:function(){return[r("v-list-item",{staticClass:"font-weight-bold"},[r("v-list-item-content",[e._v("Total")]),e._v(" "),r("v-list-item-content",{staticClass:"align-end justify-end"},[r("v-text-field",{attrs:{value:e.portionTotal,"error-messages":e._form.error("materials.value"),success:!!e._form.error("materials.value"),type:"text",prefix:"%","hide-details":"auto",readonly:"",reverse:"",flat:"",solo:"",dense:""}})],1)],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null);t.default=l.exports}}]);